spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5434/postdb}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:post}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Azure Blob Storage
azure.storage.connection-string=${AZURE_CONNECTION_STRING}
azure.storage.container-name=${AZURE_CONTAINER_NAME}

# SAS URL policy
sas.default.minutes=${SAS_DEFAULT_MINUTES:60}
sas.min.minutes=${SAS_MIN_MINUTES:1}
sas.max.minutes=${SAS_MAX_MINUTES:120}

# JWT Configuration (Clerk)
jwt.issuer=${CLERK_ISSUER:}
jwt.jwks-url=${CLERK_JWKS_URL:}
jwt.dev-mode=${JWT_DEV_MODE:false}

# Server port (uses env var SERVER_PORT if set, defaults to 8081)
server.port=${SERVER_PORT:8081}

# Multipart upload limits (can be overridden via env vars)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:200MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:250MB}
# Write to disk after this threshold (helps with memory usage for large files)
spring.servlet.multipart.file-size-threshold=${FILE_SIZE_THRESHOLD:2MB}

# Tomcat connector buffer for large requests. -1 = unlimited
server.tomcat.max-swallow-size=${TOMCAT_MAX_SWALLOW_SIZE:-1}